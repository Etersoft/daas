## Управление виртуальными стендами
Для управление созданием, удалением и настройкой виртуальных стендов для проектов, предназначен модуль *vstand*.

```daas vstand --help```

При помощи этого модуля осуществляются все основные операции по управлению инфраструктурой стендов.
Сам модуль основан на использовании [ansible](https://docs.ansible.com/).

### Настройка host машины для развёртывания на ней виртуальных стендов
Для развёртывания виртуальных стендов на какой-либо машине, требуется предварительная
её подготовка. Устновка необходимых пакетов, создание пользователей, выделение необходимых прав.
Для этого предназначена команда:

```bash
daas vstand setup [-c vstand-config.yml] hostname
```

Но предварительно требуется обеспечить доступ к машине по ssh. Для этого достаточно
* запустить сервис sshd на указанной машине
* создать пользователя, под которым будет осуществляться доступ к host машине, а так же который будет управлять разворачиваемыми стендами. 
Например пользователь *vagrant*

```
    useradd vagrant
    passwd vagrant
```

* дать ему права *sudo* для возможности устанавливать пакеты и конфигурировать систему.
Создать файл /etc/sudoers.d/vagrant

```
vagrant ALL=NOPASSWD: ALL
```
Всё остальное будет сконфигурировано автоматически на основе специального конфигурационного файла, описывающего стенд

### Создание конфигурационного файла описывающего стенд
Для управления параметрами виртуальных серверов разворачиваемых для проектов, создаётся специальный файл с описанием.

```yaml
---
version: 0.1

vstand:
  host:
    hostname: "vstand1"
    user: "vagrant"
    pass: "123"

  gitlab:
    url: "http://192.168.1.76:30080/"
    runner_registration_token: "xsmZtVJpEhbsdfs23uxTp1JAys"
```

В примере приведён минимальный набор необходимых параметров для описания стенда. 
Раздел **host** содержит параметры доступа к host-машине (user,pass), а также *hostname* который будет
выставлен на host-машине после её настройки.
Остальные параметры относятся уже к настройкам виртуальных стендов
запускаемых на host-машине под кокнретный проект, в том числе параметры доступа к gitlab,
необходимые для регистрирования gitlab-runner-ов.

Полное описание параметров описания стенда можно почитать [тут](docs/vstand-config.md)

По умолчанию файл описания стенда ищется в текущем каталоге (где запускается команда ```daas vstand ...```)
под именем **daas-vstand-config.yml**.  Но можно указать другой файл при помощи аргумента *-c|--config my-vstand-config.yml*
```
daas vstand setup -c my-vstand-config.yml hostname
```

Итоговые настройки для стенда складываются из умолчательных настроек и настроек указанных в конфигурационном файле проекта.
Их можно посмотреть (в формате вывода ansible) командой
```bash
daas vstand [-c my-vstand-config.yml] show config
```

Умолчательные настройки можно посмотреть командой
```bash
daas vstand [-c my-vstand-config.yml] show defaults
```


### Создание виртуального стенда для проекта

#### Этап 1. Разворачивание стенда на host-машине

#### Этап 1. Настройка созданного стенда для работы




